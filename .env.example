# AEGIS/.env.example
# Example environment variables for the AEGIS framework.
# Copy this file to .env and fill in the required values.

# --- AEGIS Server Configuration ---
AEGIS_PORT=8000
# Set to "true" for development to enable hot-reloading.
AEGIS_RELOAD=false

# --- Docker Networking ---
# The name of the external Docker network AEGIS should connect to.
# This allows AEGIS to communicate with services from a separate backend stack (like BEND).
# The default is 'bend_bend-net', but can be changed to any external network name.
AEGIS_EXTERNAL_NETWORK=bend_bend-net

# --- Backend API Keys ---
# Used by the 'ollama_local' and 'vllm_local' profiles to authenticate with BACKEND services.
BACKEND_API_KEY=a-secret-key-for-backend
# (Optional) Used by the 'openai_gpt4' profile if you plan to use OpenAI's API.
# OPENAI_API_KEY=sk-...

# The OpenTelemetry endpoint for exporting traces. Set to your local collector or a remote endpoint.
OTEL_EXPORTER_OTLP_ENDPOINT=""

# --- Machine Secrets ---
# These are used by the machine_loader to connect to hosts defined in machines.yaml.
ADMIN_PASSWORD=supersecret
ROOT_PASSWORD=toor
DEPLOY_PASSWORD=changeme
ESXI_PASSWORD=vmware123
REMOTE_ROOT_PASSWORD=changeme

# === AEGIS policy & loop controls ===
# Comma-separated tool names that are hard forbidden (exact match).
AEGIS_POLICY_DENY_TOOLS=
# Comma-separated tool names that always require approval (exact match).
AEGIS_POLICY_REQUIRE_APPROVAL=
# Per-minute rate limit; if exceeded for tool::target, flip to REQUIRE_APPROVAL. 0 disables.
AEGIS_POLICY_RLMAX_PER_MIN=0
# Comma-separated allowlists; if set and value not listed → REQUIRE_APPROVAL.
AEGIS_POLICY_ALLOW_HOSTS=
AEGIS_POLICY_ALLOW_INTERFACES=

# Failure breaker (tool::target) — after THRESHOLD failures within WINDOW_S, require approval for COOLDOWN_S.
AEGIS_BREAKER_WINDOW_S=120
AEGIS_BREAKER_THRESHOLD=3
AEGIS_BREAKER_COOLDOWN_S=600

# Goal edit guards
# If set (non-empty), any goal/sub-goal edit will produce an APPROVAL REQUIRED preview instead of applying.
AEGIS_REQUIRE_APPROVAL_GOAL_CHANGES=
# If set (non-empty), revise_goal must include a 'reason' or it fails fast.
AEGIS_GOAL_EDIT_REQUIRE_REASON=

# Telemetry toggles
# Set to 0 to disable plan/tool/verify span logs (+ Langfuse spans if configured)
AEGIS_TRACE_SPANS=1
# Set to 0 to disable LLM prompt/output generation telemetry (logs + Langfuse generations)
AEGIS_TRACE_GENERATIONS=1

# --- Plugin Configuration ---
# The plugins to load by default. You can add or remove plugins as needed.
GITLAB_URL=""
GITLAB_PRIVATE_TOKEN=""
SLACK_BOT_TOKEN=""
